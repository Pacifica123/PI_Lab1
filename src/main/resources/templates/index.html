<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Выбор товаров</title>
  <style>
        .product {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .product img {
            width: 100px;
            height: auto;
            margin-right: 10px;
        }
        .product select {
            width: 50px;
        }
    </style>
  <script>
        function updateTotal() {
            let totalPrice = 0;
            const products = document.getElementsByClassName('product');

            for (let i = 0; i < products.length; i++) {
                const product = products[i];
                const price = parseFloat(product.getAttribute('data-price'));
                const quantity = parseInt(product.querySelector('select').value);

                totalPrice += price * quantity;
            }

            document.getElementById('totalPrice').textContent = totalPrice.toFixed(2);
        }

        function handleSelectChange(event) {
            updateTotal();
        }
    </script>
</head>
<body>
<h1>Выберите товары:</h1>

<div class="product" data-price="10.99">
  <img src="photo1.jpg" alt="Товар 1">
  <span>Товар 1</span>
  <span>Цена: $10.99</span>
  <select onchange="handleSelectChange(event)">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <!-- Добавьте нужные варианты количества -->
  </select>
</div>

<!-- Добавьте другие товары по аналогии -->

<h2>Введите данные для оплаты:</h2>
<form action="/payments/ok" method="post">
  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required><br>

  <label for="cardNum">Номер карты:</label>
  <input type="text" id="cardNum" name="cardNum" maxlength="16" required><br>

  <label for="mmyy">MM/YY:</label>
  <input type="text" id="mmyy" name="mmyy" maxlength="5" required><br>

  <label for="cvvCvc">CVV/CVC:</label>
  <input type="text" id="cvvCvc" name="cvvCvc" maxlength="3" required><br>

  <label for="nameOwner">Имя владельца карты:</label>
  <input type="text" id="nameOwner" name="nameOwner" required><br>

  <label for="countryRegion">Страна/регион:</label>
  <select id="countryRegion" name="countryRegion" required>
    <option value="Россия">Россия</option>
    <option value="США">США</option>
    <option value="Канада">Канада</option>
  </select><br>

  <label for="price_id">PriceID:</label>
  <input type="text" id="price_id" name="price_id" required> <br>

  <label for="payment_type">Сервис оплаты:</label>
  <select id="payment_type" name="payment_type" required>
    <option value="stripe">Stripe</option>
  </select><br>

  <h3>Итоговая сумма: $<span id="totalPrice">0.00</span></h3>

  <input type="submit" value="Оплатить" id="submitButton">
</form>

<script>
        updateTotal();

        const selects = document.getElementsByTagName('select');
        for (let i = 0; i < selects.length; i++) {
            selects[i].addEventListener('change', function(event) {
                updateTotal();
            });
        }

        function handleSelectChange(event) {
            updateTotal();
        }

        const submitButton = document.getElementById('submitButton');
        submitButton.addEventListener('click', function(event) {
            const totalPrice = parseFloat(document.getElementById('totalPrice').textContent);
            if (totalPrice <= 0) {
                event.preventDefault();
                alert('Пожалуйста, выберите хотя бы один товар для оплаты.');
            } else {
                submitButton.value = 'Перейти к оплате';
            }
        });
    </script>
</body>
</html>